<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Api Open Project</title>
  </head>
  <body>
    <h1>Pagina Web</h1>
    <ul id="demo"></ul>
  </body>
</html>
<script>
    const basicAuth = btoa(`${"apikey"}:${"17be44a82d106ac77058c4b24a4896fb4c3cfaf090f379418a778265473cc6ec"}`); // Codifica a base64
  fetch("http://localhost:8080/api/v3/projects", {
    method: "GET",
    headers: {
      "Content-Type": "application/json",
      Authorization: `Basic ${basicAuth}`
    },
  })
    .then((response) => {
      if (!response.ok) {
        throw new Error(`Error HTTP: ${response.status}`);
      }
      return response.json(); // Convertimos la respuesta a JSON
    })
      .then(data => {
      const list = document.getElementById('demo');
      // La lista de proyectos viene en data._embedded.elements
      const projects = data._embedded.elements;

      projects.forEach(project => {
        const li = document.createElement('li');
        li.textContent = `Proyecto: ${project.name} (ID: ${project.id})`;
        list.appendChild(li);
      });
    })
    .catch(error => console.error('Error al obtener proyectos:', error));
</script>
